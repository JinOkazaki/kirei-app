<%= render "shared/header" %>

<div class="posts">  
  <div class="post">
    <div class="top-post">
      <%= link_to "投稿者 #{@post.user.nickname}", user_path(@post.user.id), class:"user-name-post" %>
      <span><%= @post.created_at.to_s(:datetime_jp) %></span>
    </div>
    <div class="main-post">
      <div class="trash-edit">
        <% if user_signed_in? && current_user.id == @post.user_id %>
          <div class="trash">
            <%= link_to(post_path(@post.id), method: :delete, class:"fa fa-trash fa-4x trash-btn", style: "display: flex;" ) do%>
            <% end %>
          </div>
          <div class="edit">
            <%= link_to(edit_post_path(@post.id),class:"fa fa-edit fa-4x edit-btn",style: "display: flex;") do %>
            <% end %>
          </div>
        <% end %>
      </div>
      <%= link_to(post_path(@post.id),class: "image-link") do %>
        <%= image_tag @post.image, class: 'image-main-show' %> 
      <% end %>
    </div>
    <div class="footer-show">
      <%= link_to @post.user.nickname, user_path(@post.user.id), class:"user-name-post" %>
      <hr>
      <p class="caption"><%= @post.caption %></p>
      <hr>
      <p><%= "アイテムカテゴリー : #{@post.category.name}"%></p>
    </div>
  </div>

<div class="comments">
  <div class="comment">
    <% if user_signed_in? %>
      <%= form_with(model: [@post, @comment], local: true, class:"comment-form",id:"form") do |form| %>
        <%= form.text_area :text, placeholder: "コメントを追加...",class:"comment-area", row: "1", id:"text" %>
        <%= form.submit "コメント",class:"comment-submit",id:"submit" %>
      <% end %>
    <% end %>
  </div>
</div>

<div id="list">
</div>

<% @comments.each do |comment| %>
  <div class="comment">
    <div class="comment-date">
      投稿日時：<%= comment.created_at.to_s(:datetime_jp) %>
    </div>
    <div class="comment-text">
      <%= comment.text %>
    </div>
  </div>
<% end %>


<%= render "shared/footer" %>